<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>하프도넛 차트</title>
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.min.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.bundle.min.js"></script> <script type="text/javascript" charset="utf-8" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>

</head>
<body>
    <div style="width:150px"> 
        <canvas id="chart8"></canvas> 
    </div>

    
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- <script>

    var num = Math.random(); 
    var data = { 
        labels: [ "pink" ], 
        datasets: [ { 
            data: [num, 1-num], 
            backgroundColor: [ "#FF6384" ], 
            hoverBackgroundColor: [ "#FF6384" ] 
        }] 
    };
    window.onload = function() { 
        var ctx8 = $('#chart8').get(0).getContext("2d"); 
        window.theChart8 = new Chart(ctx8, { 
            type: 'doughnut', 
            data: data, 
            options: { 
                responsive: true, 
                legend: { 
                    display: false 
                }, 
                elements: { 
                    center: { 
                        text: Math.round(num*100), 
                        fontStyle: 'Helvetica', //Default Arial 
                        sidePadding: 15 //Default 20 (as a percentage) 
                    } 
                }, 
                maintainAspectRatio : false, 
                cutoutPercentage:70, 
                animation:false, 
                rotation: 1 * Math.PI, 
                circumference: 1 * Math.PI 
            } 
        }
    }
    
</script> -->

<script type="text/javascript"> 
    var num = Math.random(); 
    var data = { labels: ["pink"],
         datasets: [{ 
            data: [num, 1 - num], 
            backgroundColor: ["#FF6384"], 
            hoverBackgroundColor: ["#FF6384"] 
        }] 
    }; 
    
    window.onload = function () {
        var ctx8 = $('#chart8').get(0).getContext("2d"); 
        window.theChart8 = new Chart(ctx8, {
            type: 'doughnut', 
            data: data, 
            options: {
                responsive: true, 
                legend: { 
                    display: false 
                }, 
                elements: {
                    center: {
                        text: Math.round(num * 100), 
                        fontStyle: 'Helvetica',
                        sidePadding: 15
                    }
                }, 
                maintainAspectRatio: false, 
                cutoutPercentage: 70, 
                animation: false, 
                rotation: 1 * Math.PI, 
                circumference: 1 * Math.PI
            }
        }); 
    }

    Chart.plugins.register({ beforeDraw: function (chart) { if (chart.config.options.elements.center) { //Get ctx from string 
    var ctx = chart.chart.ctx; //Get options from the center object in options 
    var centerConfig = chart.config.options.elements.center; 
    var fontSize = centerConfig.fontSize || '50'; var fontStyle = centerConfig.fontStyle || 'Arial';
     var txt = centerConfig.text; var color = centerConfig.color || '#000'; 
     var sidePadding = centerConfig.sidePadding || 20; 
     var sidePaddingCalculated = (sidePadding/100) * (chart.innerRadius * 2) //Start with a base font of 30px 
     ctx.font = fontSize + "px " + fontStyle; //Get the width of the string and also the width of the element minus 10 to give it 5px side padding 
     var stringWidth = ctx.measureText(txt).width; var elementWidth = (chart.innerRadius * 2) - sidePaddingCalculated; // Find out how much the font can grow in width. 
     var widthRatio = elementWidth / stringWidth; var newFontSize = Math.floor(30 * widthRatio); var elementHeight = (chart.innerRadius * 0.7); // Pick a new font size so it will not be larger than the height of label. 
     var fontSizeToUse = Math.min(newFontSize, elementHeight); //Set font settings to draw it correctly. 
     ctx.textAlign = 'center'; ctx.textBaseline = 'middle'; var centerX = ((chart.chartArea.left + chart.chartArea.right) / 2); 
     var centerY = ((chart.chartArea.top + chart.chartArea.bottom) / 2); 
     
     //반도넛일 경우
     if (chart.config.options.rotation === Math.PI && chart.config.options.circumference === Math.PI) { 
        centerY = ((chart.chartArea.top + chart.chartArea.bottom) / 1.3); 
    } 
    ctx.font = fontSizeToUse+"px " + fontStyle; 
    ctx.fillStyle = color; 
    
    //Draw text in center 
    ctx.fillText(txt, centerX, centerY); } } });

</script>

</html>