<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name='viewport' content='width=device-width, maximum-scale=1.0, minimum-scale=1, user-scalable=yes,initial-scale=1.0' />
<meta http-equiv='Content-Security-Policy' content='upgrade-insecure-requests'>
<link rel='styleSheet' href='/withmind/withmind2022/00.default/css/reset.css' type='text/css'></link>
<title></title>
<style>
    * {
        box-sizing: border-box;
        margin: 0;
    }

    body {
        background-color: #eee;
    }

    .wrapper {
        background-color: #fff;
        margin: auto;
        max-width: 100vw;
        overflow: hidden;
        display: flex;
    }

    .images-line {
        width: fit-content;
        display: flex;
        padding: 24px 0;
    }

    .rolling {
        backface-visibility: hidden;
        transform: translateX(0);
    }

    .images-line .rolling-image {
        display: block;
        filter: grayscale(1);
        width: 120px;
        margin: 0 24px;
    }

</style>
</head>
<body>
    <div class="wrapper">
        <div class="images-line">
            <img src="https://logos-world.net/wp-content/uploads/2021/02/Trello-Symbol.png" alt="Trello" class="rolling-image">
            <img src="https://logos-world.net/wp-content/uploads/2020/03/Coca-Cola-Logo-1987-2009.png" alt="CocaColla" class="rolling-image">
            <img src="https://logos-world.net/wp-content/uploads/2021/02/Trello-Symbol.png" alt="Trello" class="rolling-image">
            <img src="https://logos-world.net/wp-content/uploads/2020/03/Coca-Cola-Logo-1987-2009.png" alt="CocaColla" class="rolling-image">
            <img src="https://logos-world.net/wp-content/uploads/2021/02/Trello-Symbol.png" alt="Trello" class="rolling-image">
            <img src="https://logos-world.net/wp-content/uploads/2020/03/Coca-Cola-Logo-1987-2009.png" alt="CocaColla" class="rolling-image">
            <img src="https://logos-world.net/wp-content/uploads/2021/02/Trello-Symbol.png" alt="Trello" class="rolling-image">
            <img src="https://logos-world.net/wp-content/uploads/2020/03/Coca-Cola-Logo-1987-2009.png" alt="CocaColla" class="rolling-image">
        </div>
    </div>
</body>
<script src='http://code.jquery.com/jquery-latest.min.js'></script>
<script>
/*
  -- Start Rolling --
*/

/*
  !!!!!
  == This might cause a Stack Overflowing error, bacause of endless recursion, use carefully ==
  !!!!!
*/

const container = document.querySelector('.images-line')
const basis = container.querySelectorAll('.rolling-image').length || 0

function rolling (loop) {
  if (container) {
    const imageList = container.querySelectorAll('.rolling-image')
    const basicWidth = imageList[0].offsetWidth + parseInt(getComputedStyle(imageList[0]).marginLeft) + parseInt(getComputedStyle(imageList[0]).marginRight)

    let translation = 0
      
    if (!loop) {
      if (imageList && imageList.length !== 0) {
        const urlList = []
        imageList.forEach(image => {
          urlList.push(image.src)
        })

        urlList.forEach((url, i) => {
          const image = document.createElement('img')
          image.classList.add('rolling-image')
          image.src = urlList[i]
          image.alt = imageList[i].alt

          container.append(image)

          if (i < urlList.length / 2) {
             translation -= basicWidth
          }
        })

        container.classList.add('rolling')
        container.style.transform = `translateX(${translation}px)`
        container.style.transition = 'transform 6s linear'

        setInterval(() => {
          container.style.transform = 'translateX(0)'
          container.style.transition = 'none'
          
          rolling(true)
        }, 6000)
      }
    } else {
      if (imageList && imageList.length !== 0) {
        const urlList = [] 
        imageList.forEach(image => {
          urlList.push(image.src)
        })

        urlList.forEach((url, i) => {
          if (i < urlList.length / 2) {
            if (i < urlList.length / 4) {
              translation -= basicWidth
            }
          }
        })
        
        container.style.transform = `translateX(${translation}px)`
        container.style.transition = 'transform 6s linear'

        setInterval(() => {
          container.style.transform = 'translateX(0)'
          container.style.transition = 'none'
          
          rolling(true)
        }, 6000)
      }
    }
    
    return
  }
  
  return
}

window.addEventListener('load', rolling(false))

/*
  -- DEPRECATED --
*/

// const urlList = []

// imageList.forEach(image => {
//   urlList.push(image.src)
// })

// let transform = 0
// let counter = -1
// let amount = -1

// function rolling () { 
//   const limit = container.offsetWidth
//   container.classList.add('rolling')
  
//   if (container.children.length < urlList.length * 2) {
//     if (transform > -limit + 168) {
//       transform -= 168
//     } else {
//       transform = -limit
//     }
//   } else {
//     container.classList.remove('rolling')
//     const toRemove = container.querySelectorAll('.rolling-image')
 
    
//     // !!!
    
//     transform += 168 * 5
    
//     // !!!

//     for (let i = 0; i < urlList.length; i++) {
//       toRemove[i].remove()
//     }
//   }

//   if (counter < urlList.length - 1) {
//     counter++
//   } else {
//     counter = 0
//   }

//   const image = document.createElement('img')
//   image.classList.add('rolling-image')
//   image.src = urlList[counter]
//   image.alt = imageList[counter].alt

//   container.append(image)

//   container.style.transform = `translate(${transform}px)`
  
//   console.log('elements: ', container.children.length)
// }

// setInterval(() => {
//   window.requestAnimationFrame(() => rolling())
// }, 1000)

</script>
</html>
<!-- 
출처
https://codepen.io/antonmiazyn/pen/gORroXB 
-->